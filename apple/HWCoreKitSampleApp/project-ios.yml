name: HWCoreKitSampleAppiOS
options:
  minimumXcodeGenVersion: 2.44.0
  xcodeVersion: "16.0"
packages:
  HWCoreKit:
    path: ../HWCoreKit
settings:
  base:
    SWIFT_VERSION: 5.9
targets:
  HWCoreKitSampleAppiOS:
    type: application
    platform: iOS
    deploymentTarget: "16.0"
    sources:
      - path: Sources/HWCoreKitSampleApp
    settings:
      base:
        GENERATE_INFOPLIST_FILE: YES
        CURRENT_PROJECT_VERSION: "1"
        MARKETING_VERSION: "1.0"
        INFOPLIST_KEY_UILaunchStoryboardName: LaunchScreen
        PRODUCT_BUNDLE_IDENTIFIER: dev.hewig.hwcorekit.sampleiosapp
        PRODUCT_NAME: HWCoreKitSampleAppiOS
        LIBRARY_SEARCH_PATHS[sdk=iphonesimulator*]: $(inherited) $(SRCROOT)/../../target/ios-sim/debug
        LIBRARY_SEARCH_PATHS[sdk=iphoneos*]: $(inherited) $(SRCROOT)/../../target/aarch64-apple-ios/debug
        OTHER_LDFLAGS: $(inherited) -lhw_ffi
        TARGETED_DEVICE_FAMILY: "1"
    dependencies:
      - package: HWCoreKit
        product: HWCoreKit

  HWCoreKitSampleAppiOSUITests:
    type: bundle.ui-testing
    platform: iOS
    deploymentTarget: "16.0"
    sources:
      - path: UITests/iOS
    settings:
      base:
        GENERATE_INFOPLIST_FILE: YES
        CURRENT_PROJECT_VERSION: "1"
        MARKETING_VERSION: "1.0"
        PRODUCT_BUNDLE_IDENTIFIER: dev.hewig.hwcorekit.sampleiosapp.uitests
        TEST_TARGET_NAME: HWCoreKitSampleAppiOS
    dependencies:
      - target: HWCoreKitSampleAppiOS

schemes:
  HWCoreKitSampleAppiOS:
    build:
      targets:
        HWCoreKitSampleAppiOS: all
        HWCoreKitSampleAppiOSUITests: [test]
    test:
      targets:
        - name: HWCoreKitSampleAppiOSUITests
